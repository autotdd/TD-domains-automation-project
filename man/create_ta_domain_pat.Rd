% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generate_TA_dataset_v7_PA_with_TRANS.R
\name{create_ta_domain_pat}
\alias{create_ta_domain_pat}
\title{Generate TA and TE Datasets for PA with TRANS}
\usage{
create_ta_domain_pat(
  study_id,
  trial_design,
  arms_data,
  treatments_list,
  te_rules,
  output_dir = getwd()
)
}
\arguments{
\item{study_id}{A character string representing the Study ID.}

\item{trial_design}{A character string representing the trial design. Should be either "PARALLEL DESIGN" or "PARALLEL DESIGN WITH BRANCHES AND TRANSITIONS".}

\item{arms_data}{A list of arm data. Each element in the list should be a list containing \code{armcd}, \code{epochs}, and optionally \code{branch} and \code{trans}.}

\item{treatments_list}{A list of treatments corresponding to each arm.}

\item{te_rules}{A data frame containing TE rules with columns: TESTRL, TEENRL, TEDUR.}

\item{output_dir}{A character string representing the output directory. Defaults to the current working directory.}
}
\value{
A list containing the TA and TE data frames.
}
\description{
This function generates the TA and TE datasets for a given study ID and trial design.
It supports both "PARALLEL DESIGN" and "PARALLEL DESIGN WITH BRANCHES AND TRANSITIONS".
}
\details{
This function creates the TA (Trial Arms) domain dataset, which is part of the SDTM (Study Data Tabulation Model),
and then creates the TE (Trial Elements) domain dataset using the elements from the TA domain and user-provided rules.
It handles both "PARALLEL DESIGN" and "PARALLEL DESIGN WITH BRANCHES AND TRANSITIONS" trials.
The dataset includes columns for study ID, domain, arm codes, epochs, elements with treatments, branches, and transitions.
}
\note{
\itemize{
\item The \code{arms_data} parameter should be a list of arm data, where each arm includes arm code, epochs, branches (optional), and transitions (optional).
\item The \code{treatments_list} parameter should be a list of treatments corresponding to each arm.
\item The function supports "PARALLEL DESIGN" and "PARALLEL DESIGN WITH BRANCHES AND TRANSITIONS" trials.
}
}
\examples{
\dontrun{
# Example usage with PARALLEL DESIGN
study_id <- "STUDY002"
trial_design <- "PARALLEL DESIGN"
arms_data <- list(
  list(
    armcd = "ARM1",
    epochs = "Screening,Treatment,Treatment,Treatment,Follow-Up"
  ),
  list(
    armcd = "ARM2",
    epochs = "Screening,Treatment,Treatment,Treatment,Follow-Up"
  ),
  list(
    armcd = "ARM3",
    epochs = "Screening,Treatment,Treatment,Treatment,Follow-Up"
  )
)

# Define treatments dynamically for each arm
treatments_list <- list(
  c("A", "B", "C"), # Treatments for ARM1
  c("D", "E", "F"), # Treatments for ARM2
  c("G", "H", "I")  # Treatments for ARM3
)

te_rules <- data.frame(
  TESTRL = c("Informed consent", "First dose of study drug", "End of treatment", "End of follow-up"),
  TEENRL = c("End of screening", "End of treatment period", "End of follow-up period", "End of study"),
  TEDUR = c("P7D", "P14D", "P7D", "P21D")
)

ta_te_df_parallel <- create_ta_domain_pat(study_id, trial_design, arms_data, treatments_list, te_rules)
print(ta_te_df_parallel$TA)
print(ta_te_df_parallel$TE)

# Example usage with PARALLEL DESIGN WITH BRANCHES AND TRANSITIONS
trial_design <- "PARALLEL DESIGN WITH BRANCHES AND TRANSITIONS"
arms_data <- list(
  list(
    armcd = "ARM1",
    epochs = "Screening,Treatment,Treatment,Treatment,Follow-Up",
    branch = c(NA, "Branch1", NA, NA, NA),
    trans = c(NA, "Trans1", "Trans2", NA, NA)
  ),
  list(
    armcd = "ARM2", 
    epochs = "Screening,Treatment,Treatment,Treatment,Follow-Up",
    branch = c(NA, "Branch2", NA, NA, NA),
    trans = c(NA, "Trans3", "Trans4", NA, NA)
  ),
  list(
    armcd = "ARM3",
    epochs = "Screening,Treatment,Treatment,Treatment,Follow-Up",
    branch = c(NA, "Branch3", NA, NA, NA),
    trans = c(NA, "Trans5", "Trans6", NA, NA)
  )
)

# Define treatments dynamically for each arm
treatments_list <- list(
  c("A", "B", "C"), # Treatments for ARM1
  c("D", "E", "F"), # Treatments for ARM2
  c("G", "H", "I")  # Treatments for ARM3
)

ta_te_df_parallel_branches <- create_ta_domain_pat(study_id, trial_design, arms_data, treatments_list, te_rules)
print(ta_te_df_parallel_branches$TA)
print(ta_te_df_parallel_branches$TE)
}
}
